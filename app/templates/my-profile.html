{% extends "__base__.html" %}

{% block title %}{{ gettext('My Profile') }}{% endblock %}

{% block page_style_pre %}
  <link rel="stylesheet" href="/static/chosen_v1.4.2/docsupport/style.css">
  <link rel="stylesheet" href="/static/chosen_v1.4.2/docsupport/prism.css">
  <link rel="stylesheet" href="/static/chosen_v1.4.2/chosen.css">
  <style>
  .noi-button { margin-top: 20px; margin-left: 20px;}
  .selector { margin-top: 20px; margin-left: 20px;}
  ol ul li, ul ul li {
  list-style-type: none;
  margin: initial;
}
ul li {
  list-style: initial;
  margin-left: initial;
  margin-bottom: initial;
}



  </style>
{% endblock %}

{% block page_style_post %}
{% endblock %}

{% block content %}

<div id="mobileTest" class="hidden-xs"></div>

<form class="footer-fix" action="#" method="post" enctype="multipart/form-data">
{{ form.csrf_token }}
{% if form.has_picture.data %}
<input type="hidden" name="has_picture" value="true" />
{% endif %}

<div class="form-horizontal">

{% macro input(name) -%}
<div class="form-group">
  {{ form[name].label(class="col-md-4 control-label") }}
  <div class="col-md-4">
  {{ form[name](class="input-md form-control",placeholder=form[name].description) }}
  {% if form[name].errors %}
    <ul class="error">
    {% for error in form[name].errors %}
    <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </div>
</div>
{%- endmacro %}

<fieldset>

<!-- Form Name -->
<legend></legend>

{{ input("picture") }}
{{ input("first_name") }}
{{ input("last_name") }}
{{ input("position") }}
{{ input("organization") }}
{{ input("organization_type") }}
{{ input("city") }}
{{ input("country") }}
{{ input("expertise_domain_names") }}
{{ input("locales") }}
{{ input("projects") }}


<div class="text-center">
  <button type="submit">{{ gettext('Save') }}</button>
</div>

</form>

{% endblock %}

{% block page_script %}

<script src="/static/chosen_v1.4.2/chosen.jquery.js" type="text/javascript"></script>
<script src="/static/chosen_v1.4.2/docsupport/prism.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
    $('#picture').on('change', function (evt) {
        if (this.files) {
          if (this.files[0]) {
            if (this.files[0].size > 1000 * 1000) {
              $(this).val('');
              alert({{ gettext('Sorry, that file is too big.  Please choose a smaller one.')|tojson }});
            }
          }
        }
    })
    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }

    if (!$('#mobileTest').is(':hidden')) {
      for (var selector in config) {
        $(selector).chosen(config[selector]);
      }
    }

</script>

{% endblock %}
