{% extends "__base_ui__.html" %}

{% block title %}{{ gettext("%(user)s's Profile", user=user.full_name) }}{% endblock %}

{% from "_macros.html" import get_user_avatar_url %}

{% block content %}

<section class="b-profile-header">
    <div class="e-bg" style="background-image: url('{{ get_user_avatar_url(user) }}')"></div> 
    <div class="e-left">
        <img src="{{ get_user_avatar_url(user) }}" alt="" class="e-picture">
        <span class="e-edit material-icons">edit</span>
    </div>
    <div class="e-right">
        <h2 class="e-name">{{ user.full_name }}</h2>
        <h3 class="e-job">{{ user.position }}</h3>

        <ul class="e-info">
           {% if user.organization %}
             <li><span class="material-icons">business</span>{{ user.organization }}</li> 
           {% endif %}

           {% if user.expertise_domain_names %}
             {% for domain in user.expertise_domain_names %}
               <li><span class="material-icons">school</span>{{ domain }}</li>
             {% endfor %}
           {% endif %}

           {% if user.full_location %}
           <li><span class="material-icons">location_on</span>{{ user.full_location }}</li> 
           {% endif %}

           {% if user.locales %}
             {% for locale in user.locales %}
               <li>{{ locale.get_display_name(locale=get_locale()) }}</li>
             {% endfor %}
           {% endif %}
        </ul>
    </div>
</section>

<nav class="b-contextual-nav">
    <ul class="e-menu-items" role="tablist">
        <li role="presentation" class="e-item active"><a href="#overview" aria-controls="overview" role="tab" data-toggle="tab">{{ gettext('Overview') }}</a></li>
        <li role="presentation" class="e-item"><a href="#expertise" aria-controls="expertise" role="tab" data-toggle="tab">{{ gettext('Expertise') }}</a></li>
    </ul>
</nav>

<div> <!-- Start of tab panel container -->

<section role="tabpanel" id="overview" class="active">
<a href="mailto:{{ user.email }}?subject=Contact+request+via+Network+Of+Innovators&body=Dear+{{user.first_name}}" data-connect-to="{{ user.email }}">E-Mail</a>

<h3>{{ gettext('Projects I have done') }}</h3>
{% if user.projects %}
<pre>{{ user.projects }}</pre>
{% else %}
{{ gettext("No project information provided.") }}
{% endif %}

</section>

<section role="tabpanel" id="expertise">

<ul>
{% for skill in user.skills %}
{% with %}
{% set question = QUESTIONS_BY_ID[skill.name] %}
<li>
{{ question.questionnaire.name }}:
<strong>{{ LEVELS_BY_SCORE[skill.level].label }}</strong>
<span>{{ question.question }}</span>
</li>
{% endwith %}
{% endfor %}

</ul>

</section>

</div> <!-- End of tab panel container -->

<footer class="b-footer-message">

</footer>

{% endblock %}
